%%
%% labs/common/assignment.tex
%% (c) 2021-22 Christopher A. Bohn
%%
%% Licensed under the Apache License, Version 2.0 (the "License");
%% you may not use this file except in compliance with the License.
%% You may obtain a copy of the License at
%%     http://www.apache.org/licenses/LICENSE-2.0
%% Unless required by applicable law or agreed to in writing, software
%% distributed under the License is distributed on an "AS IS" BASIS,
%% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
%% See the License for the specific language governing permissions and
%% limitations under the License.
%%

\documentclass[12pt]{article}

\usepackage{fullpage}
\usepackage{fancyhdr}
\usepackage[procnames]{listings}
\usepackage{hyperref}
\usepackage{textcomp}
\usepackage{bold-extra}
\usepackage[dvipsnames]{xcolor}
\usepackage{etoolbox}

% These are placeholder commands and will be renewed in each lab

\newcommand{\labnumber}{}
\newcommand{\labname}{Lab \labnumber\ Assignment}
\newcommand{\shortlabname}{}
\newcommand{\duedate}{}

% Individual or team effort

\newcommand{\individualeffort}{This is an individual-effort project. You may
    discuss concepts and syntax with other students, but you may discuss
    solutions only with the professor and the TAs. Sharing code with or copying
    code from another student or the internet is prohibited.}
\newcommand{\teameffort}{This is a team-effort project. You may discuss concepts
    and syntax with other students, but you may discuss solutions only with your
    assigned partner(s), the professor, and the TAs. Sharing code with or
    copying code from a student who is not on your team, or from the internet,
    is prohibited.}
\newcommand{\freecollaboration}{In addition to the professor and the TAs, you
    may freely seek help on this assignment from other students.}
\newcommand{\collaborationrules}{}

% Software engineering (if you care about that)

\providebool{allowspaghetticode}

\newcommand{\softwareengineeringfrontmatter}{
    \ifboolexpe{not bool{allowspaghetticode}}{
        \section*{No Spaghetti Code Allowed}
        In the interest of keeping your code readable, you may \textit{not} use
        any \lstinline{goto} statements, nor may you use any
        \lstinline{continue} statements, nor may you use any \lstinline{break}
        statements to exit from a loop, nor may you have any functions
        \lstinline{return} from within a loop.
    }{}
}

\newcommand{\spaghetticodepenalties}[1]{
    \ifboolexpe{not bool{allowspaghetticode}}{
        \penaltyitem{1}{for each \lstinline{goto} statement,
            \lstinline{continue} statement, \lstinline{break} statement used to
            exit from a loop, or \lstinline{return} statement that occurs within
            a loop.}
    }{}
}

% You shouldn't need to customize these,
% but you can if you like

\lstset{language=C, tabsize=4, upquote=true, basicstyle=\ttfamily}
\newcommand{\function}[1]{\textbf{\lstinline{#1}}}
\setlength{\headsep}{0.7cm}
\hypersetup{colorlinks=true}

\newcommand{\pagelayout}{
    \pagestyle{fancy}
    \fancyhf{}
    \lhead{\coursenumber}
    \chead{\ Lab \labnumber: \labname}
    \rhead{\courseterm}
    \cfoot{\shortlabname-\thepage}
}

\newcommand{\labidentifier}{
    \title{\ Lab \labnumber}
    \author{\labname}
    \date{Due: \duedate}
    \maketitle

    \textit{\collaborationrules}
}

% deprecated
\newcommand{\startdocument}{
    \pagelayout
	\begin{document}
	\labidentifier
}

\newcommand{\rubricitem}[2]{\item[\underline{\hspace{1cm}} +#1] #2}
\newcommand{\bonusitem}[2]{\item[\underline{\hspace{1cm}} Bonus +#1] #2}
\newcommand{\penaltyitem}[2]{\item[\underline{\hspace{1cm}} -#1] #2}
\newcommand{\checkoffitem}[1]{\item (\phantom{xxx}) #1}
\newcommand{\precheckoffitem}[1]{\item [] (\phantom{xxx}) #1}
